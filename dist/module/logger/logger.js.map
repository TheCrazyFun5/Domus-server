{"version":3,"file":"logger.js","sourceRoot":"","sources":["../../../src/module/logger/logger.ts"],"names":[],"mappings":"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","sourcesContent":["import fs from \"fs\";\r\nimport path from \"path\";\r\nconst rootDir = path.join(\"logs\");\r\nclass Logger {\r\n  private logsDir: string;\r\n  private name: string;\r\n  private logFileName: string;\r\n  private logger: fs.WriteStream | null = null;\r\n\r\n  constructor(name: string) {\r\n    this.logsDir = path.join(rootDir, name);\r\n    this.logFileName = path.join(this.logsDir, `${this.date()}.log`);\r\n    this.name = name;\r\n    this.init();\r\n  }\r\n  private date(time?: boolean): string {\r\n    const date = new Date();\r\n    const timestamp = `${date.getDate() <= 9 ? \"0\" + date.getDate() : date.getDate()}.${\r\n      date.getMonth() + 1 <= 9 ? \"0\" + (date.getMonth() + 1) : date.getMonth() + 1\r\n    }.${date.getFullYear()}${time ? ` ${date.getHours()}-${date.getMinutes()}` : ``}`;\r\n    return timestamp;\r\n  }\r\n  private init() {\r\n    try {\r\n      if (!fs.existsSync(this.logsDir)) {\r\n        fs.mkdirSync(this.logsDir, { recursive: true });\r\n      }\r\n      this.logger = fs.createWriteStream(this.logFileName, { flags: \"a\" });\r\n    } catch (err) {\r\n      console.error(\"❌ Ошибка инициализации логгера:\", err);\r\n      this.logger = null;\r\n    }\r\n  }\r\n  public log(msg: any, name?: string) {\r\n    this.sendLogger(`[INFO] [${name ? name : this.name}] ${msg}`);\r\n  }\r\n  public error(msg: any, name?: string) {\r\n    this.sendLogger(`[ERROR] [${name ? name : this.name}] ${msg}`);\r\n  }\r\n  public warn(msg: any, name?: string) {\r\n    this.sendLogger(`[WARN] [${name ? name : this.name}] ${msg}`);\r\n  }\r\n\r\n  private sendLogger(str: string) {\r\n    const fullMessage = `[${this.date(true)}] ${str}\\n`;\r\n    process.stdout.write(fullMessage);\r\n    if (this.logger) this.logger.write(fullMessage);\r\n  }\r\n}\r\nexport default Logger;\r\n"]}